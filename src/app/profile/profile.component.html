<div class="box">
    <div class="col header">
      <app-navbar></app-navbar>
    </div>
    <div class="col content" style="width: 100%; display: flex; padding-bottom: 7rem;">
      <div style="width: 40%; padding-top: 3rem; padding-left: 4rem">
        <div *ngIf="userForm.value.image == undefined" class="avatar-preview">
          <img [src]="imageUrl" />
        </div>
        <div  *ngIf="userForm.value.image != undefined" class="avatar-preview">
          <img [src]="imageUrl" />
        </div>

      </div>
      <div style="width: 60%">
        <form [formGroup]="userForm" >
          <p-panel>
            <ng-template pTemplate="header"> EDIT PROFILE </ng-template>
            <div class="p-fluid p-formgrid p-grid">
              <div class="p-field p-col-12 p-md-4">
                <span class="p-float-label">
                  <input
                    id="float-input"
                    type="text"
                    formControlName="username"
                    required
                    pInputText
                    [readOnly]="true"
                  />
                  <label for="float-input">username</label>
                </span>

              </div>
          
              <div class="p-field p-col-12 p-md-4">
                <span class="p-float-label">
                  <input
                    id="float-input"
                    type="text"
                    formControlName="firstName"
                    required
                    pInputText
                  />
                  <label for="float-input">First name</label>
                </span>
               
                <small
                  class="p-error"
                  *ngIf="
                    userForm.get('firstName').invalid && userForm.get('firstName').dirty
                  "
                >
                firstName is required.
                </small>
              </div>
              <div class="p-field p-col-12 p-md-4">
                <span class="p-float-label">
                  <input
                    id="float-input"
                    type="text"
                    formControlName="lastName"
                    required
                    pInputText
                  />
                  <label for="float-input">Last Name</label>
                </span>
               
                <small
                  class="p-error"
                  *ngIf="
                    userForm.get('lastName').invalid && userForm.get('lastName').dirty
                  "
                >
                Last name is required.
                </small>
              </div>
              <div class="p-field p-col-12 p-md-4">
                <span class="p-float-label">
                  <input
                    id="float-input"
                    type="number"
                    formControlName="age"
                    required
                    pInputText
                  />
                  <label for="float-input">Age</label>
                </span>
               
                <small
                  class="p-error"
                  *ngIf="
                    userForm.get('age').invalid && userForm.get('age').dirty
                  "
                >
                  Age is required and must be at least 13.
                </small>
              </div>
              <div class="p-field p-col-12 p-md-4">
                <span class="p-float-label">
                  <input
                    id="float-input"
                    type="text"
                    formControlName="cin"
                    required
                    pInputText
                  />
                  <label for="float-input">CIN</label>
                </span>
                <small
                  class="p-error"
                  *ngIf="
                    userForm.get('cin').invalid && userForm.get('cin').dirty
                  "
                >
                  CIN is required.
                </small>
              </div>
              <div class="p-field p-col-12 p-md-4">
                <span class="p-float-label">
                  <input
                    id="float-input-mailAddress"
                    type="email"
                    formControlName="mailAddress"
                    required
                    pInputText
                  />
                  <label for="float-input-mailAddress">Email</label>
                </span>
                <small
                  class="p-error"
                  *ngIf="
                    userForm.get('mailAddress').invalid &&
                    userForm.get('mailAddress').dirty
                  "
                >
                  Email is required and must be a valid email address.
                </small>
              </div>
              <!-- <div class="p-field p-col-12 p-md-4">
                <span class="p-float-label">
                  <input
                    id="float-input"
                    type="text"
                    formControlName="phoneNumber"
                    required
                    pInputText
                  />
                  <label for="float-input">Phone Number</label>
                </span>
                <small
                  class="p-error"
                  *ngIf="
                    userForm.get('phoneNumber').invalid &&
                    userForm.get('phoneNumber').dirty
                  "
                >
                  Phone number is required.
                </small>
              </div> -->
              <div class="d-flex flex-row align-items-center mb-4">
                <i class="fas fa-key fa-lg me-3 fa-fw"></i>
                <div class="form-outline flex-fill mb-0">
                  <label class="form-label" for="form3Example4cd"
                    >Phone Number</label
                  >
                  <ngx-intl-tel-input
                    [cssClass]="'custom'"
                    [preferredCountries]="preferredCountries"
                    [enableAutoCountrySelect]="true"
                    [enablePlaceholder]="true"
                    [searchCountryFlag]="true"
                    [searchCountryField]="[
                      SearchCountryField.Iso2,
                      SearchCountryField.Name
                    ]"
                    [selectFirstCountry]="false"
                    [selectedCountryISO]="CountryISO.Tunisia"
                    [maxLength]="15"
                    [phoneValidation]="true"
                    [separateDialCode]="separateDialCode"
                    [numberFormat]="PhoneNumberFormat.National"
                    formControlName="phoneNumber"
                  >
                  </ngx-intl-tel-input>
                  <small
                    class="p-error"
                    *ngIf="
                      userForm.get('phoneNumber').invalid &&
                      userForm.get('phoneNumber').dirty
                    "
                  >
                    Phone Number is required.
                  </small>
                </div>
              </div>
              <div class="p-field p-col-12">
                <p-fileUpload
                  chooseLabel="Choose image"
                  mode="advanced"
                  accept="image/*"
                  [auto]="true"
                  [showCancelButton]="true"
                  [showUploadButton]="true"
                  [customUpload]="true"
                  (onSelect)="onUploadImage($event, $event.files)"
                ></p-fileUpload>
              </div>
            </div>
            <ng-template pTemplate="footer">
              <div class="p-d-flex p-jc-end btn-cls">
                <button
                  pButton
                  type="submit"
                  label="Submit"
                  icon="pi pi-check"
                  (click)="onSubmit()"
                  [disabled]="!userForm.valid"
                ></button>
                <button
                  pButton
                  class="btn btn-danger"
                  type="reset"
                  label="Reset"
                  icon="pi pi-times"
                ></button>
              </div>
            </ng-template>
          </p-panel>
        </form>
      </div>
    </div>
    <div class="col footer">
      <app-footer></app-footer>
    </div>
  </div>
  <p-toast position="bottom-right"></p-toast>